/*
Exercise 3: Advanced Features
Build a library management system with:
• Book inventory
• Student borrowing records
• Fine calculation
• Search functionality with multiple filters
*/


Exercise 3: Advanced Features
Library Management System using MySQL

Database Name : mysql_jdbc_practice
Table Name    : books, students, borrow_records


Create Books Table :


Query:
CREATE TABLE books (
 book_id INT PRIMARY KEY,
 title VARCHAR(100),
 author VARCHAR(50),
 category VARCHAR(50),
 total_copies INT,
 available_copies INT
);

Output:
Query OK, 0 rows affected (0.10 sec)



Insert Book Records :


Query:
INSERT INTO books VALUES
(1, 'Java Basics', 'James Gosling', 'Programming', 5, 3),
(2, 'DBMS Concepts', 'Korth', 'Database', 4, 2),
(3, 'Python Guide', 'Guido', 'Programming', 6, 6);

Output:
Query OK, 3 rows affected (0.02 sec)
Records: 3  Duplicates: 0  Warnings: 0



View Book Inventory :


Query:
SELECT * FROM books;

Output:
+---------+---------------+---------------+-------------+--------------+------------------+
| book_id | title         | author        | category    | total_copies | available_copies |
+---------+---------------+---------------+-------------+--------------+------------------+
|       1 | Java Basics   | James Gosling | Programming |            5 |                3 |
|       2 | DBMS Concepts | Korth         | Database    |            4 |                2 |
|       3 | Python Guide  | Guido         | Programming |            6 |                6 |
+---------+---------------+---------------+-------------+--------------+------------------+
3 rows in set (0.00 sec)



Create Students Table :


Query:
CREATE TABLE students (
 student_id INT PRIMARY KEY,
 name VARCHAR(50)
);

Output:
Query OK, 0 rows affected (0.03 sec)



Create Borrow Records Table :


Query:
CREATE TABLE borrow_records (
 borrow_id INT PRIMARY KEY,
 student_id INT,
 book_id INT,
 borrow_date DATE,
 return_date DATE
);

Output:
Query OK, 0 rows affected (0.04 sec)



Insert Student Records :


Query:
INSERT INTO students VALUES
(1, 'Amit'),
(2, 'Riya');

Output:
Query OK, 2 rows affected (0.01 sec)
Records: 2  Duplicates: 0  Warnings: 0



Insert Borrow Records :


Query:
INSERT INTO borrow_records VALUES
(101, 1, 1, '2026-01-01', NULL),
(102, 2, 2, '2026-01-05', '2026-01-12');

Output:
Query OK, 2 rows affected (0.01 sec)
Records: 2  Duplicates: 0  Warnings: 0



View Student Records :


Query:
SELECT * FROM students;

Output:
+------------+------+
| student_id | name |
+------------+------+
|          1 | Amit |
|          2 | Riya |
+------------+------+
2 rows in set (0.00 sec)



View Borrow Records :


Query:
SELECT * FROM borrow_records;

Output:
+-----------+------------+---------+-------------+-------------+
| borrow_id | student_id | book_id | borrow_date | return_date |
+-----------+------------+---------+-------------+-------------+
|       101 |          1 |       1 | 2026-01-01  | NULL        |
|       102 |          2 |       2 | 2026-01-05  | 2026-01-12  |
+-----------+------------+---------+-------------+-------------+
2 rows in set (0.00 sec)



Fine Calculation for Late Return (After 7 Days) :


Query:
SELECT borrow_id, student_id, book_id,
DATEDIFF(CURDATE(), borrow_date)-7 AS late_days,
(DATEDIFF(CURDATE(), borrow_date)-7)*5 AS fine_amount
FROM borrow_records
WHERE return_date IS NULL
AND DATEDIFF(CURDATE(), borrow_date) > 7;

Output:
+-----------+------------+---------+-----------+-------------+
| borrow_id | student_id | book_id | late_days | fine_amount |
+-----------+------------+---------+-----------+-------------+
|       101 |          1 |       1 |        31 |         155 |
+-----------+------------+---------+-----------+-------------+
1 row in set, 1 warning (0.03 sec)



Search Book by Author and Category :


Query:
SELECT *
FROM books
WHERE author = 'James Gosling'
AND category = 'Programming';

Output:
+---------+-------------+---------------+-------------+--------------+------------------+
| book_id | title       | author        | category    | total_copies | available_copies |
+---------+-------------+---------------+-------------+--------------+------------------+
|       1 | Java Basics | James Gosling | Programming |            5 |                3 |
+---------+-------------+---------------+-------------+--------------+------------------+
1 row in set (0.01 sec)



Search Available Books :


Query:
SELECT *
FROM books
WHERE available_copies > 0;

Output:
+---------+---------------+---------------+-------------+--------------+------------------+
| book_id | title         | author        | category    | total_copies | available_copies |
+---------+---------------+---------------+-------------+--------------+------------------+
|       1 | Java Basics   | James Gosling | Programming |            5 |                3 |
|       2 | DBMS Concepts | Korth         | Database    |            4 |                2 |
|       3 | Python Guide  | Guido         | Programming |            6 |                6 |
+---------+---------------+---------------+-------------+--------------+------------------+
3 rows in set (0.00 sec)



Search Book by Title :


Query:
SELECT *
FROM books
WHERE title LIKE '%Java%';

Output:
+---------+-------------+---------------+-------------+--------------+------------------+
| book_id | title       | author        | category    | total_copies | available_copies |
+---------+-------------+---------------+-------------+--------------+------------------+
|       1 | Java Basics | James Gosling | Programming |            5 |                3 |
+---------+-------------+---------------+-------------+--------------+------------------+
1 row in set (0.00 sec)


